<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>
    <%= title %>
  </title>

  <%- include("../partials/head") %>
    <link rel="stylesheet" href="/css/registro.css">
</head>

<body class="bg-overlay">
  <%- include("../partials/navigation") %>

    <div class="bg-overlay">
      <div
        class="container vh-100 d-flex justify-content-center align-items-center animate__animated animate__bounceIn">
        <div class="card animated flipInY form-card shadow-sm">

          <div class="card-header bg-dark text-white text-center border-secondary">
            <h3 class="mb-0">
              <%= title %>
            </h3>
          </div>

          <div class="card-body">

            <% if (error) { %>
              <div class="alert alert-danger text-center">
                <%= error %>
              </div>
              <% } %>

                <!-- Info del registro -->
                <div class="mb-3">
                  <h5>Datos del registro</h5>
                  <p class="mb-1"><strong>ID registro:</strong>
                    <%= registro.id_registro %>
                  </p>
                  <p class="mb-1"><strong>Fecha:</strong>
                    <%= registro.fecha || "" %>
                  </p>
                  <p class="mb-1"><strong>Hora entrada:</strong>
                    <%= registro.hora_entrada %>
                  </p>
                  <p class="mb-1"><strong>Hora salida:</strong>
                    <%= registro.hora_salida %>
                  </p>
                </div>

                <form action="/factura/generar" method="POST">

                  <input type="hidden" name="id_registro" value="<%= registro.id_registro %>">

                  <div class="mb-3">
                    <label for="id_multa" class="form-label">Multa (opcional)</label>
                    <select name="id_multa" id="id_multa" class="form-select">
                      <option value="">Sin multa</option>
                      <% if (multas && multas.length> 0) { %>
                        <% multas.forEach(function(m) { %>
                          <option value="<%= m.id_multa %>">
                            <%= m.descripcion %> - $<%= m.monto %>
                          </option>
                          <% }); %>
                            <% } %>
                    </select>
                  </div>

                  <div class="d-flex justify-content-between">
                    <a href="/registros" class="btn btn-secondary">
                      Volver
                    </a>

                    <button type="submit" class="btn btn-primary">
                      Generar factura
                    </button>
                  </div>


                </form>
          </div>

        </div>
      </div>
    </div>

</body>

</html>